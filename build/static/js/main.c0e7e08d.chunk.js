(this["webpackJsonpmoney-jouney"]=this["webpackJsonpmoney-jouney"]||[]).push([[0],{113:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(13),i=n.n(a),o=(n(91),n(92),n(146)),d=n(145),s=n(80),l=n(67),j=n(16),u=n(10),O=n.n(u),b=n(19),h=n(14),x=n(45),p=n(47),f=n(29),m=n(141),y=n(81),S=n(144),E=n(60),_={apiKey:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_KEY,authDomain:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_AUTH_DOMAIN,databaseUrl:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_DATABASE_URL,projectId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_PROJECT_ID,storageBucket:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_STORAGE_BUCKET,messagingSenderId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_MESSAGING_SENDER_ID,appId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_APP_ID},g=n(143),v=n(41),C=n(39),T=(n(78),n(74),n(3));0===C.a.apps.length&&C.a.initializeApp(_);var A=C.a.firestore(),D=A.collection("category"),R=A.collection("money");function k(){var e=Object(c.useState)([]),t=Object(h.a)(e,2),n=t[0],r=t[1],a=Object(E.a)(),i=a.register,o=a.handleSubmit,d=Object(c.useState)(!1),l=Object(h.a)(d,2),j=l[0],u=l[1],_=Object(c.useState)(!1),C=Object(h.a)(_,2),A=C[0],k=C[1],F=Object(c.useState)({id:null,createdAt:new Date,description:"",name:""}),w=Object(h.a)(F,2),H=w[0],N=w[1],K=D.orderBy("createdAt","asc").limitToLast(100),L=Object(x.a)(K,{idField:"id"}),B=Object(h.a)(L,1)[0],W=R.orderBy("createdAt","asc"),I=Object(c.useState)(!1),U=Object(h.a)(I,2),V=(U[0],U[1],Object(x.a)(W,{idField:"id"})),M=Object(h.a)(V,1)[0];console.log(M),Object(c.useEffect)((function(){if(B){var e=B.map((function(e,t){return console.log(M),Object(T.jsx)(P,{data:e,id:B[t].id,list:B[t],onDeleteClicked:J,onEditClick:G},B[t].id)}));r(e)}}),[B,M]);var q=function(){var e=Object(b.a)(O.a.mark((function e(t,n){var c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c={description:t.description,name:t.name,createdAt:new Date},!A){e.next=10;break}return console.log("sss",JSON.stringify(M)),console.log(t.id),M&&(console.log("what?"),console.log("id",t.id),M.forEach(function(){var e=Object(b.a)(O.a.mark((function e(n){var c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("cate",n.category.id),n.category.id!==t.id){e.next=7;break}return c=n,console.log("ss",c),c.category.name=t.name,e.next=7,R.doc(n.id).set(c).then((function(){return console.log("moneyRef has been set")})).catch((function(e){console.error("Error: ",e),alert(e)}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),e.next=8,D.doc(t.id).set(c).then((function(){return console.log("moneyRef has been set")})).catch((function(e){console.error("Error: ",e),alert(e)}));case 8:e.next=12;break;case 10:return e.next=12,D.add(c).then((function(){return console.log("New record has been added.")})).catch((function(e){console.error("Errror:",e),alert(e)}));case 12:z();case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),J=function(){var e=Object(b.a)(O.a.mark((function e(t,n,c){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure?")){e.next=4;break}return M&&M.forEach(function(){var e=Object(b.a)(O.a.mark((function e(t){var c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("data id",n.id),console.log("cate id",t.category.id),t.category.id!==n.id){e.next=9;break}return c=t,console.log("journalRef",R),c.category.id="unknown",c.category.name="Uncategorised",e.next=9,R.doc(t.id).set(c).then((function(){return console.log("moneyRef has been set")})).catch((function(e){console.error("Error: ",e),alert(e)}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=4,D.doc(t).delete();case 4:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),G=function(e,t){var n={id:e,description:t.description,name:t.name,createdAt:new Date(t.createdAt.seconds)};console.log("handleEditClick",n),N(n),k(!0),u(!0)},z=function(){u(!1)};return Object(T.jsx)("div",{style:{marginTop:"1%"},children:Object(T.jsxs)(s.a,{children:[Object(T.jsx)(p.a,{children:Object(T.jsxs)(f.a,{children:[Object(T.jsx)("h1",{children:"Category Management"}),Object(T.jsxs)(m.a,{variant:"outline-dark",onClick:function(){return u(!0)},children:[Object(T.jsx)(v.b,{})," Add"]})]})}),Object(T.jsx)("div",{style:{marginTop:"3%"},children:Object(T.jsxs)(y.a,{stickyheader:"true","aria-label":"sticky table",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"#"}),Object(T.jsx)("th",{children:"Name"}),Object(T.jsx)("th",{children:"Description"})]})}),Object(T.jsx)("tbody",{children:n})]})}),Object(T.jsx)(S.a,{show:j,onHide:z,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:Object(T.jsxs)("form",{onSubmit:o(q),children:[Object(T.jsx)("input",{type:"hidden",placeholder:"createdAt",ref:i({required:!1}),name:"id",id:"id",defaultValue:Object(g.a)(H.createdAt,"yyyy-MM-dd")}),Object(T.jsx)("input",{type:"hidden",placeholder:"ID",ref:i({required:!1}),name:"id",id:"id",defaultValue:H.id}),Object(T.jsx)(S.a.Header,{closeButton:!0,children:Object(T.jsx)(S.a.Title,{children:A?"Edit Category":"Add New Category"})}),Object(T.jsxs)(S.a.Body,{children:[Object(T.jsxs)(p.a,{children:[Object(T.jsx)(f.a,{children:Object(T.jsx)("label",{htmlFor:"name",children:"Name"})}),Object(T.jsx)(f.a,{children:Object(T.jsx)("input",{type:"text",placeholder:"Name",ref:i({required:!0}),name:"name",id:"name",defaultValue:H.name})})]}),Object(T.jsxs)(p.a,{children:[Object(T.jsx)(f.a,{children:Object(T.jsx)("label",{htmlFor:"name",children:"Description"})}),Object(T.jsx)(f.a,{children:Object(T.jsx)("input",{type:"text",placeholder:"Description",ref:i({required:!0}),name:"description",id:"description",defaultValue:H.description})})]})]}),Object(T.jsxs)(S.a.Footer,{children:[Object(T.jsx)(m.a,{variant:"secondary",onClick:z,children:"Close"}),Object(T.jsx)(m.a,{variant:A?"success":"primary",type:"submit",children:A?"Save Category":"Add Category"})]})]})})]})})}function P(e){var t=e.data,n=e.id,c=e.list;return console.log("props ".concat(t)),Object(T.jsxs)("tr",{children:[Object(T.jsxs)("td",{children:[Object(T.jsx)(v.c,{onClick:function(){return e.onDeleteClicked(n,c)}}),Object(T.jsx)(v.a,{onClick:function(){return e.onEditClick(n,c)}})]}),Object(T.jsx)("td",{children:t.name}),Object(T.jsx)("td",{children:t.description})]})}var F=n(70),w=n(142);0===C.a.apps.length&&C.a.initializeApp(_);var H=C.a.firestore();function N(){var e=H.collection("money"),t=H.collection("category"),n=e.orderBy("createdAt","asc").limitToLast(100),r=t.orderBy("createdAt","asc").limitToLast(100),a=Object(x.a)(n,{idField:"id"}),i=Object(h.a)(a,1)[0],o=Object(x.a)(r,{idField:"id"}),d=Object(h.a)(o,1)[0],l=Object(c.useState)([]),j=Object(h.a)(l,2),u=j[0],_=j[1],C=Object(c.useState)(),A=Object(h.a)(C,2),D=A[0],R=A[1],k=Object(E.a)(),P=k.register,N=k.handleSubmit,B=Object(c.useState)(!1),W=Object(h.a)(B,2),I=W[0],U=W[1],V=Object(c.useState)([]),M=Object(h.a)(V,2),q=M[0],J=M[1],G=Object(c.useState)(0),z=Object(h.a)(G,2),Y=z[0],Q=z[1],X=Object(c.useState)(!1),Z=Object(h.a)(X,2),$=Z[0],ee=Z[1],te=Object(c.useState)({id:null,createdAt:new Date,description:"",amount:0,category:u[0]}),ne=Object(h.a)(te,2),ce=ne[0],re=ne[1];Object(c.useEffect)((function(){if(d){var e=[{id:0,name:"-- All -- "}];d.forEach((function(t){e.push({id:t.id,name:t.name})})),_(e)}}),[d]),Object(c.useEffect)((function(){if(i){var e=0,t=i.map((function(t,n){return e+=t.amount,Object(T.jsx)(L,{data:t,i:n,onDeleteClick:oe,onEditClick:de},n)}));J(t),Q(e)}}),[i]);var ae=function(){re({id:null,createdAt:new Date,description:"",amount:0,category:u[0]}),ee(!1),R({}),U(!1)},ie=function(){var t=Object(b.a)(O.a.mark((function t(n){var c;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c={description:n.description,amount:parseFloat(n.amount),createdAt:new Date(n.createdAt),category:D},!$){t.next=6;break}return t.next=4,e.doc(n.id).set(c).then((function(){return console.log("moneyRef has been set")})).catch((function(e){console.error("Error: ",e),alert(e)}));case 4:t.next=8;break;case 6:return t.next=8,e.add(c).then((function(){return console.log("New record has been added.")})).catch((function(e){console.error("Errror:",e),alert(e)}));case 8:ae();case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),oe=function(t){window.confirm("Are you sure to delete this record?")&&e.doc(t).delete()},de=function(e){var t={id:e.id,description:e.description,amount:parseFloat(e.amount),createdAt:e.createdAt.toDate(),category:D};ee(!0),re(t),R(e.category),U(!0)};return Object(T.jsx)("div",{style:{marginTop:"1%"},children:Object(T.jsxs)(s.a,{children:[Object(T.jsxs)(p.a,{children:[Object(T.jsxs)(f.a,{children:[Object(T.jsx)("h1",{children:"Journal"}),Object(T.jsxs)(m.a,{variant:"outline-dark",onClick:function(){return U(!0)},children:[Object(T.jsx)(v.b,{})," Add"]})]}),Object(T.jsxs)(f.a,{children:["Category:",Object(T.jsx)(F.a,{options:u,getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id},onChange:function(e){if(i){var t=0,n=i.filter((function(t){return 0==e.id||t.category.id==e.id})).map((function(e,n){return t+=e.amount,Object(T.jsx)(L,{data:e,i:n,onDeleteClick:oe,onEditClick:de})}));J(n),Q(t)}}})]})]}),Object(T.jsx)("div",{style:{marginTop:"3%"},children:Object(T.jsxs)(y.a,{striped:!0,hover:!0,children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"#"}),Object(T.jsx)("th",{children:"Date"}),Object(T.jsx)("th",{children:"Description"}),Object(T.jsx)("th",{children:"Category"}),Object(T.jsx)("th",{children:"Amount"})]})}),Object(T.jsx)("tbody",{children:q}),Object(T.jsx)("tfooter",{children:Object(T.jsx)("td",{colSpan:5,children:Object(T.jsxs)("h3",{children:["Total: ",Y]})})})]})}),Object(T.jsx)(S.a,{show:I,onHide:ae,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:Object(T.jsxs)("form",{onSubmit:N(ie),children:[Object(T.jsx)("input",{type:"hidden",placeholder:"ID",ref:P({required:!1}),name:"id",id:"id",defaultValue:ce.id}),Object(T.jsx)(S.a.Header,{closeButton:!0,children:Object(T.jsx)(S.a.Title,{children:$?"Edit Record":"Add New Record"})}),Object(T.jsxs)(S.a.Body,{children:[Object(T.jsxs)(p.a,{children:[Object(T.jsx)(f.a,{children:Object(T.jsx)("label",{htmlFor:"createdAt",children:"Date"})}),Object(T.jsx)(f.a,{children:Object(T.jsx)("input",{type:"date",placeholder:"Date",ref:P({required:!0}),name:"createdAt",id:"createdAt",defaultValue:Object(g.a)(ce.createdAt,"yyyy-MM-dd")})})]}),Object(T.jsxs)(p.a,{children:[Object(T.jsx)(f.a,{children:Object(T.jsx)("label",{htmlFor:"category",children:"Category"})}),Object(T.jsx)(f.a,{children:Object(T.jsx)(F.a,{id:"category",name:"category",value:D,placeholder:"Category",options:u.filter((function(e){return 0!=e.id})),onChange:function(e){R(e)},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id},ref:P})})]}),Object(T.jsxs)(p.a,{children:[Object(T.jsx)(f.a,{children:Object(T.jsx)("label",{htmlFor:"description",children:"Description"})}),Object(T.jsx)(f.a,{children:Object(T.jsx)(w.a,{id:"standard-basic",label:"Standard",inputRef:P({required:!0}),name:"description"})})]}),Object(T.jsxs)(p.a,{children:[Object(T.jsx)(f.a,{children:Object(T.jsx)("label",{htmlFor:"amount",children:"Amount"})}),Object(T.jsx)(f.a,{children:Object(T.jsx)("input",{type:"number",step:"any",min:"0",placeholder:"Amount",ref:P({required:!0}),name:"amount",id:"amount",defaultValue:ce.amount})})]})]}),Object(T.jsxs)(S.a.Footer,{children:[Object(T.jsx)(m.a,{variant:"secondary",onClick:ae,children:"Close"}),Object(T.jsx)(m.a,{onClick:K($,N,ie),variant:$?"success":"primary",type:"submit",children:$?"Save Record":"Add Record"})]})]})})]})})}function K(e,t,n){console.log("modal click","modal clicked"),console.log(e.toString(),e.toString()),t(n)}function L(e){var t=e.data;e.i;return Object(T.jsxs)("tr",{children:[Object(T.jsxs)("td",{children:[Object(T.jsx)(v.c,{onClick:function(){return e.onDeleteClick(t.id)}}),Object(T.jsx)(v.a,{onClick:function(){return e.onEditClick(t)}})]}),Object(T.jsx)("td",{children:Object(g.a)(t.createdAt.toDate(),"yyyy-MM-dd")}),Object(T.jsx)("td",{children:t.description}),Object(T.jsx)("td",{children:t.category.name}),Object(T.jsx)("td",{children:t.amount})]})}function B(){return Object(T.jsx)("div",{children:Object(T.jsx)(s.a,{children:Object(T.jsx)("h1",{children:"Home"})})})}var W=function(){return Object(T.jsxs)(l.a,{children:[Object(T.jsxs)(o.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",children:[Object(T.jsx)(o.a.Brand,{href:"/",children:"Money Journey"}),Object(T.jsx)(o.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(T.jsx)(o.a.Collapse,{id:"responsive-navbar-nav",children:Object(T.jsxs)(d.a,{className:"mr-auto",children:[Object(T.jsx)(d.a.Link,{href:"#journal",children:"Journal"}),Object(T.jsx)(d.a.Link,{href:"#category",children:"Category"})]})})]}),Object(T.jsxs)(j.c,{children:[Object(T.jsx)(l.a,{path:"/journal",children:Object(T.jsx)(N,{})}),Object(T.jsx)(j.a,{path:"/category",children:Object(T.jsx)(k,{})}),Object(T.jsx)(j.a,{path:"/",children:Object(T.jsx)(B,{})})]})]})},I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,147)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))};i.a.render(Object(T.jsx)(r.a.StrictMode,{children:Object(T.jsx)(W,{})}),document.getElementById("root")),I()},91:function(e,t,n){}},[[113,1,2]]]);
//# sourceMappingURL=main.c0e7e08d.chunk.js.map